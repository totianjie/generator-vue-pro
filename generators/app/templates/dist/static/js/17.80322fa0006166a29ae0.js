webpackJsonp([17],{"5UGq":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),r=a("QmSG"),n=a("SJI6"),l=Object(n.createNamespacedHelpers)("safeManage"),o=l.mapGetters,d=l.mapMutations,c=l.mapActions,u={data:function(){return{test:"",btnSize:r.a.baseBtn}},props:{value:{type:Boolean,default:function(){return!1}}},computed:s()({isAdd:function(){return"add"===this.pageType},isDetail:function(){return"detail"===this.pageType},isList:function(){return"list"===this.pageType}},o(["pageType","Parameters"])),created:function(){var t=this.$route.query._init;t&&(this.reset(),this.getList(),this.setPageType("list"))},methods:s()({handlePagingChange:function(t){this.setParameters(t)},handlerSearch:function(t){this.parameters.offset=1,this.$refs.Fpage._init()}},d(["setPageType","setParameters"]),c(["reset","getList"])),filters:{},components:{ModuleTable:function(){return new Promise(function(t){t()}).then(a.bind(null,"S+iM"))},AddView:function(){return new Promise(function(t){t()}).then(a.bind(null,"ySiu"))},DetailView:function(){return new Promise(function(t){t()}).then(a.bind(null,"5q6P"))}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isList?a("div",{staticClass:"function-wrap"},[a("el-button",{attrs:{type:"primary",size:t.btnSize},on:{click:function(e){return t.setPageType("add")}}},[t._v("新增")])],1):t._e(),t._v(" "),t.isList?a("module-table",{staticClass:"safe-manage-list-table"}):t._e(),t._v(" "),t.isList?a("v-paging",{ref:"Fpage",attrs:{total:t.Parameters.total,currentPage:t.Parameters.offset,pageSize:t.Parameters.limit},on:{pagingChange:t.handlePagingChange}}):t._e(),t._v(" "),t.isAdd?a("add-view"):t._e(),t._v(" "),t.isDetail?a("detail-view"):t._e()],1)},staticRenderFns:[]};var m=a("VU/8")(u,p,!1,function(t){a("p4Ii")},"data-v-a6af25d6",null);e.default=m.exports},"5q6P":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),r=a("QmSG"),n=a("G8k7"),l=a("SJI6"),o=Object(l.createNamespacedHelpers)("safeManage"),d=o.mapGetters,c=o.mapMutations,u={data:function(){return{span:8,btnSize:r.a.baseBtn,formSize:r.a.homeFormSize}},computed:s()({macList:function(){try{return(this.DetailData.mac||"").split(";").map(function(t){return-1===t.indexOf(":")&&-1===t.indexOf("-")&&(t=(t.substr(0,2)||"**")+":"+(t.substr(2,2)||"**")+":"+(t.substr(4,2)||"**")+":"+(t.substr(6,2)||"**")+":"+(t.substr(8,2)||"**")+":"+(t.substr(10,2)||"**")),t})}catch(t){}},packages:function(){return this.DetailData.zipList}},d(["DetailData"])),props:{},created:function(){},mounted:function(){},methods:s()({loadDown:function(t,e){var a=e.id;Object(n.d)({zipId:a}).then(function(t){}).catch(function(t){})}},c(["setPageType"])),filters:{dateTimeDowith:function(t){if(null===t||void 0===t)return"";if("number"==typeof t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1;i=i<10?"0"+i:i;var s=e.getDate();s=s<10?"0"+s:s;var r=e.getHours();r=r<10?"0"+r:r;var n=e.getMinutes(),l=e.getSeconds();return a+"-"+i+"-"+s+" "+r+":"+(n=n<10?"0"+n:n)+":"+(l=l<10?"0"+l:l)}return t.length>19?t.substr(0,19):t}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"detail-wrap page w-h-fill"},[a("div",{staticClass:"detailContent"},[a("el-col",{attrs:{span:12,offset:5}},[a("v-item-detail",{attrs:{tooltip:!0,label:"许可证名称：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t.DetailData.name))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.DetailData.name))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"许可证备注：",span:t.span}},[a("span",{staticClass:"block showAllText"},[t._v(t._s(t.DetailData.remark))]),t._v(" "),a("div",{staticClass:"tooltip-item showAllText",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.DetailData.remark))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"部署地点：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t.DetailData.deployAddr))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.DetailData.deployAddr))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"创建人：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t.DetailData.craeteUser))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.DetailData.craeteUser))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"创建时间：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t._f("dateTimeDowith")(t.DetailData.createTime)))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t._f("dateTimeDowith")(t.DetailData.createTime)))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"有效时长(天)：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t.DetailData.validTime))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.DetailData.validTime))])]),t._v(" "),t._l(t.macList,function(e,i){return a("v-item-detail",{key:i,attrs:{tooltip:!0,label:0===i?"mac地址：":"",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(e))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(e))])])}),t._v(" "),t._l(t.packages,function(e,i){return a("v-item-detail",{key:i,attrs:{tooltip:!0,label:0===i?"授权包列表：":"",span:t.span}},[a("i",{staticClass:"el-icon-document pull-left",staticStyle:{"padding-right":"6px","line-height":"20px"}}),t._v(" "),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.oldName.length>18,expression:"item.oldName.length>18"}],staticClass:"item",attrs:{effect:"dark",content:e.oldName,placement:"top-start"}},[a("span",{staticClass:"block text-ellipsis package-class pull-left"},[t._v(t._s(e.oldName))])]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.oldName.length<19,expression:"item.oldName.length<19"}],staticClass:"block text-ellipsis package-class pull-left"},[t._v(t._s(e.oldName))]),t._v(" "),0!==e.status?a("span",{staticClass:"pull-right loadDown-btn pointer block",staticStyle:{"padding-right":"6px"},on:{click:function(a){return t.loadDown(i,e)}}},[t._v("下载")]):t._e(),t._v(" "),0===e.status?a("span",{staticClass:"pull-right pointer block",staticStyle:{"padding-right":"6px"},on:{click:function(a){return t.loadDown(i,e)}}},[t._v("处理中")]):t._e(),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.oldName))])],1)})],2)],1),t._v(" "),a("div",{staticStyle:{height:"64px"}},[a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"text-center m-t-16 m-b-16"},[a("el-button",{attrs:{size:t.btnSize},on:{click:function(e){return t.setPageType("list")}}},[t._v("返回")])],1)])],1)])},staticRenderFns:[]};var m=a("VU/8")(u,p,!1,function(t){a("BuQD")},"data-v-5249bca8",null);e.default=m.exports},BuQD:function(t,e){},"S+iM":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),r=a("QmSG"),n=a("SJI6"),l=Object(n.createNamespacedHelpers)("safeManage"),o=l.mapGetters,d=l.mapMutations,c=l.mapActions,u={data:function(){return{test:"",tableSize:r.a.tableSize,colWidth:"100px"}},props:{tableData:{type:Array,default:function(){return[]}}},computed:s()({},o(["ListData"])),methods:s()({handleDetail:function(t){this.getDetail(t),this.setPageType("detail")}},d(["setPageType","setParameters"]),c(["getDetail"])),filters:{dateTimeDowith:function(t){if(null===t||void 0===t)return"";if("number"==typeof t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1;i=i<10?"0"+i:i;var s=e.getDate();s=s<10?"0"+s:s;var r=e.getHours();r=r<10?"0"+r:r;var n=e.getMinutes(),l=e.getSeconds();return a+"-"+i+"-"+s+" "+r+":"+(n=n<10?"0"+n:n)+":"+(l=l<10?"0"+l:l)}return t.length>19?t.substr(0,19):t}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n    "+t._s(t.test)+"\n    "),a("el-table",{attrs:{height:"100%",width:"100%",size:t.tableSize,data:t.ListData,border:"","highlight-current-row":!0,stripe:!0}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,prop:"name",label:"许可证名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,prop:"mac",label:"mac地址","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,prop:"validTime",label:"有效时长(天)","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,prop:"craeteUser",label:"创建人","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,prop:"createTime",label:"创建时间","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("dateTimeDowith")(e.row.createTime))+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,prop:"remark","show-overflow-tooltip":"",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{width:"70",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"edit-btn-class",attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDetail(e.row)}}},[t._v("查看")])]}}])})],1)],1)},staticRenderFns:[]};var m=a("VU/8")(u,p,!1,function(t){a("l0v6")},"data-v-c316d970",null);e.default=m.exports},"V/KU":function(t,e){},l0v6:function(t,e){},p4Ii:function(t,e){},ySiu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),r=a("Dd8w"),n=a.n(r),l=a("woOf"),o=a.n(l),d=a("QmSG"),c=a("SJI6"),u=Object(c.createNamespacedHelpers)("safeManage"),p=u.mapGetters,m=u.mapMutations,f=u.mapActions,v={data:function(){return{url:"/apc/licenses/upload",maxFilesSizeMap:[{reg:/\.(zip)$/,size:200}],test:"",btnSize:d.a.baseBtn,formSize:d.a.baseBtn,addForm:{validTime:"",name:"",remark:"",deployAddr:"",macList:[{text:"",showError:!1,errorType:null}],mac:"",zipList:[]},macRule:[{max:50,message:"最大长度为50",trigger:"blur"},{required:!0,message:"请输入mac地址",trigger:"blur"}],rules:o()({},{name:[{max:50,message:"最大长度为50",trigger:"blur"},{required:!0,message:"请输入许可证名称",trigger:"blur"}],remark:[{max:200,message:"最大长度为200",trigger:"blur"}],deployAddr:[{required:!0,message:"请输入部署地点",trigger:"blur"}],validTime:[{required:!0,message:"请输入有效时长(天)",trigger:"blur"}],macList:[{required:!0,message:"mac地址至少需要一个",trigger:"change"}],zipList:[{required:!0,message:"至少上传一个zip包",trigger:"change"}]})}},props:{},watch:{},mounted:function(){this._init()},computed:n()({},p(["AddData"])),methods:n()({stringFormat:function(t){if(-1===(t=t.replace(/-/g,":")).indexOf(":")&&-1===t.indexOf("-")){var e="";return e=(e=(e=(e=(e=(e=e+(t.substr(0,1)||"")+(t.substr(1,1)||"")+":")+(t.substr(2,1)||"")+(t.substr(3,1)||"")+":")+(t.substr(4,1)||"")+(t.substr(5,1)||"")+":")+(t.substr(6,1)||"")+(t.substr(7,1)||"")+":")+(t.substr(8,1)||"")+(t.substr(9,1)||"")+":")+(t.substr(10,1)||"")+(t.substr(11,1)||""),""!==t.substr(12,1)&&(e+=":",e+=t.substr(12,100)||""),e}return t},inputInfo:function(t){if(0===t.text.length)t.showError=!0,t.errorType=1;else{var e=t.text,a=this.stringFormat(e),i=!1;a.split(":").forEach(function(t){2!==t.length&&(i=!0)}),i?(t.showError=!0,t.errorType=2):(t.showError=!1,t.errorType=null,t.text=a,this.getMac())}},changeResult:function(t){this.addForm.zipList=t,this.addData_(this.addForm)},uploadreuslt:function(t,e,a){this.addForm.zipList=a,this.addData_(this.addForm)},_init:function(){"{}"!==s()(this.AddData)&&(this.addForm=JSON.parse(s()(this.AddData)))},getMac:function(){var t=this.addForm.macList.map(function(t){return t.text});this.addForm.mac=t.join(";"),this.addData_(this.addForm)},addMac:function(){this.addForm.macList.push({text:"",showError:!1,errorType:null})},delMac:function(t){this.addForm.macList.splice(t,1),this.getMac()},handlerSubmit:function(){var t=this;this.addData_(this.addForm),this.$refs.addForm.validate(function(e){if(!e)return!1;t.addSend()})},handlerCancel:function(){this.setAddData(),this.setPageType("list")},reg:function(t){return/\.(zip)$/.test(t)}},m(["setPageType","setParameters","setAddData"]),f(["reset","getList","addData_","addSend"]))},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n    "+t._s(t.test)+"\n    "),a("div",{staticClass:"page p-t-40 over-auto",on:{click:function(e){t.treeShow=!1}}},[a("el-col",{attrs:{span:10,offset:4}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.rules,"label-width":"175px",size:t.formSize},on:{blur:function(e){return t.addData_(t.addForm)}}},[a("el-form-item",{attrs:{label:"许可证名称：",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入许可证名称",maxlength:"50",size:t.btnSize},on:{blur:function(e){return t.addData_(t.addForm)}},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name","string"==typeof e?e.trim():e)},expression:"addForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"许可证备注：",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入许可证备注",maxlength:"200",size:t.btnSize},on:{blur:function(e){return t.addData_(t.addForm)}},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark","string"==typeof e?e.trim():e)},expression:"addForm.remark"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"部署地点：",prop:"deployAddr"}},[a("el-input",{attrs:{placeholder:"请输入部署地点",maxlength:"50",size:t.btnSize},on:{blur:function(e){return t.addData_(t.addForm)}},model:{value:t.addForm.deployAddr,callback:function(e){t.$set(t.addForm,"deployAddr","string"==typeof e?e.trim():e)},expression:"addForm.deployAddr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"有效时长(天)：",prop:"validTime"}},[a("el-input",{attrs:{placeholder:"请输入有效时长(天)",oninput:"value=value.replace(/[^\\d]/g,'')",maxlength:"4",size:t.btnSize},on:{blur:function(e){return t.addData_(t.addForm)}},model:{value:t.addForm.validTime,callback:function(e){t.$set(t.addForm,"validTime",e)},expression:"addForm.validTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"mac地址：",prop:"macList"}},[a("el-button",{attrs:{size:t.btnSize,type:"primary"},on:{click:t.addMac}},[t._v("新增地址")]),t._v(" "),t._l(t.addForm.macList,function(e,i){return a("div",{staticClass:"w-fill",staticStyle:{"margin-top":"7px"}},[a("div",{staticStyle:{"line-height":"32px"}},[a("el-input",{class:e.showError?"el-input__inner__error_self":"",staticStyle:{width:"calc(100% - 58px)"},attrs:{placeholder:"请输入mac地址",maxlength:"20",size:t.btnSize,oninput:"this.value=this.value.replace(/[^\\w-:]/g,'');"},on:{blur:function(a){return t.inputInfo(e)}},model:{value:e.text,callback:function(a){t.$set(e,"text","string"==typeof a?a.trim():a)},expression:"item.text"}}),t._v(" "),a("span",{staticClass:"pull-right delete-btn pointer block",staticStyle:{"line-height":"32px","padding-right":"6px"},on:{click:function(e){return t.delMac(i)}}},[t._v("删除")])],1),t._v(" "),e.showError&&1===e.errorType?a("div",{staticClass:"el-form-item__error",staticStyle:{"line-height":"13px",position:"initial"}},[t._v("\n                            请输入mac地址\n                        ")]):t._e(),t._v(" "),e.showError&&2===e.errorType?a("div",{staticClass:"el-form-item__error",staticStyle:{"line-height":"13px",position:"initial"}},[t._v("\n                            请输入正确格式的mac地址(以-或:分隔或无分隔)\n                        ")]):t._e()])})],2),t._v(" "),a("el-form-item",{attrs:{label:"软件包上传：",prop:"zipList"}},[a("v-upload",{ref:"uploadRef",attrs:{url:t.url,reg:t.reg,uploadSameFileName:!1,doDefaultOperation:!1,maxFilesSizeMap:t.maxFilesSizeMap,filePath:"file",holderPlace:"上传文件",btnSize:t.btnSize,multiple:!0},on:{changeResult:t.changeResult,uploadreuslt:t.uploadreuslt}})],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:t.btnSize},on:{click:t.handlerCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:t.btnSize,type:"primary"},on:{click:t.handlerSubmit}},[t._v("确 定")])],1)],1)],1)],1)])},staticRenderFns:[]};var _=a("VU/8")(v,h,!1,function(t){a("V/KU")},"data-v-d2173c0c",null);e.default=_.exports}});