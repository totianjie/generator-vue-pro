webpackJsonp([19],{"0SBb":function(t,e){},"558L":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("woOf"),n=a.n(r),i=a("QmSG"),o={props:{},data:function(){return{formSize:i.a.homeFormSize,name:"",span:8,btnSize:i.a.homeBtn,date:"",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}}}},computed:{beginDate:function(){return Array.isArray(this.date)?this.date[0]:""},endDate:function(){return Array.isArray(this.date)?this.date[1]:""}},watch:{name:function(t){this.changeText(t)}},methods:{searchCheck:function(t){if("string"!=typeof t)return!0;if(!t.length)return!0;return!!/^[a-zA-Z0-9\u4e00-\u9fa5]+$/.test(t)||(this.$toast("输入不正确（须中文、英文、数字输入），请重新输入"),!1)},changeText:function(t){if("string"!=typeof t)return!0;if(!t.length)return!0;for(var e=t.split("'"),a=!0,r=0;r<e.length;r++)a=!!e[r].length;return!(!/^[a-zA-Z0-9\u4e00-\u9fa5]+$/.test(t)&&!a)||(this.$toast("输入不正确（须中文、英文、数字输入），请重新输入"),!1)},handlerSearch:function(){if(this.searchCheck(this.name)){var t=this.name.replace(/%/,""),e={name:t,keyword:t,beginDate:this.beginDate,endDate:this.endDate};this.$emit("search",e)}}},components:{}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"over-hidden search-wrap"},[a("v-search-box",[a("div",{staticClass:"clearfix"},[a("el-col",{attrs:{span:t.span}},[a("v-input",{attrs:{label:"关键词：",labelWidth:75,pxUnit:!0}},[a("el-input",{attrs:{size:t.formSize,placeholder:"请输入关键词"},on:{blur:t.searchCheck},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:t.span}},[a("v-input",{attrs:{label:"日期：",labelWidth:70,pxUnit:!0}},[a("el-date-picker",{staticClass:"w-fill",attrs:{size:t.formSize,"value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"btn"},slot:"btn"},[a("el-button",{attrs:{size:t.btnSize},on:{click:t.handlerSearch}},[t._v("查询")])],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(o,l,!1,function(t){a("crwD")},"data-v-77465074",null).exports,d=a("sxCH"),c={props:{tableData:{type:Array,default:function(){return[]}}},data:function(){return{tableSize:i.a.tableSize,colWidth:i.a.colWidth,options:[{value:"0",label:"禁用"},{value:"1",label:"启用"}]}},computed:{},watch:{},created:function(){this.oldStatus=""},methods:{handleEdit:function(t){this.$emit("edit",t)},handleDel:function(t){var e=this,a=t.id;this._$confirm().then(function(){Object(d.b)({id:a}).then(function(t){e._send()})}).catch(function(){return!1})},handleDetail:function(t){this.$emit("detail",t)},handleCommand:function(t,e){var a=this,r=t.status,n=(t.id,e.value);e.label;if(r===n)return!1;var i="1"===n?"是否需要对该用户账户进行启用":"是否需要对该用户账户进行禁用",o="1"===n?"启用":"禁用";this._$confirm({content:i,title:o}).then(function(){a._send()}).catch(function(){return!1})},_send:function(){this.$emit("update")}},filters:{formatStatus:function(t){return"0"===t?"禁用":"启用"},dateTimeDowith:function(t){return t.length>19?t.substr(0,19):t}},components:{}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{attrs:{size:t.tableSize,data:t.tableData,"highlight-current-row":"",stripe:!0,height:"100%",width:"100%",border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,"show-overflow-tooltip":"",prop:"code",label:"组织编码"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,"show-overflow-tooltip":"",prop:"orgName",label:"组织名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"edit-btn-class",attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDetail(e.row)}}},[t._v(t._s(e.row.orgName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,"show-overflow-tooltip":"",prop:"pertainOrgName",label:"所属组织"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,"show-overflow-tooltip":"",prop:"pertainRoleName",label:"所属角色组"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":t.colWidth,"show-overflow-tooltip":"",prop:"createUser",label:"创建人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createDate","min-width":t.colWidth,"show-overflow-tooltip":"",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("dateTimeDowith")(e.row.createDate))+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","show-overflow-tooltip":!0,width:"139px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"edit-btn-class",attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"edit-btn-class",attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDel(e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var h=a("VU/8")(c,u,!1,function(t){a("INlW")},"data-v-66cb1323",null).exports,p=a("IVM2"),f={name:[{required:!0,trigger:"blur",validator:function(t,e,a){try{if("string"!=typeof e)return a(new Error("请输入组织名称"));if(!e.length)return a(new Error("请输入组织名称"));var r=e.length<2||e.length>20;if(r)return a(new Error("您输入不正确(须中、英文输入，2~20 位字符) 重新输入"));if(!(r=p.a.textAlphaChinese.test(e)))return a(new Error("您输入不正确(须中、英文输入，2~20 位字符) 重新输入"));a()}catch(t){}}}],code:[{required:!0,trigger:"blur",validator:function(t,e,a){try{if("string"!=typeof e)return a();if(!e.length)return a();var r=/^[a-z|A-Z|0-9|\_|\#|\-]+$/.test(e),n=e.length<2||e.length>20;if(!r)return a(new Error("您输入不正确(须英文、 数字、符号(--、_、#)输入，2~20 位字符)"));if(n)return a(new Error("您输入不正确(须英文、 数字、符号(--、_、#)输入，2~20 位字符)"));a()}catch(t){}}}],roleGroupCode:[{required:!0,message:"请选择所属角色组",trigger:"change"}],parentId:[{required:!0,message:"请选择所属组织",trigger:"change"}],remark:[{validator:function(t,e,a){try{return"string"!=typeof e?a():e.length&&e.length>200?a(new Error("您输入不正确(限制 200 字符)")):a()}catch(t){return a()}},trigger:"blur"}]},m={data:function(){var t=this;return{formSize:i.a.baseFormSize,btnSize:i.a.baseBtn,addForm:{name:"",code:"",parentId:"",roleGroupCode:"",remark:""},orgName:"",orgData:[],treeShow:!1,defaultProps:{children:"childOrg",label:"name",disabled:"disabled"},rules:n()({},f,{code:[{trigger:"blur",validator:function(e,a,r){try{if("string"!=typeof a)return r(new Error("请输入组织编码"));if(0===a.length)return r(new Error("请输入组织编码"));var n=/^[a-zA-Z0-9_#-]+$/.test(a),i=a.length<2||a.length>20;if(!n)return r(new Error("您输入不正确(须英文、 数字、符号(--、_、#)输入，2~20 位字符)"));if(i)return r(new Error("您输入不正确(须英文、 数字、符号(--、_、#)输入，2~20 位字符)"))}catch(t){}Object(d.a)({code:a,id:t.orgId}).then(function(t){if(t.data){if("请求成功"!==t.data.errorMsg)return void r(new Error(t.data.errorMsg))}else if("请求成功"!==t.errorMsg)return void r(new Error(t.errorMsg));r()}).catch(function(t){r(new Error(t.errorMsg))})},required:!0}]}),roleGroupData:[]}},props:{value:{type:Boolean,default:function(){return!1}},isEdit:{type:Boolean,default:function(){return!1}},orgId:{type:Number,default:function(){return""}}},created:function(){var t=this;this.isEdit&&Object(d.c)({id:this.orgId}).then(function(e){var a=e.data,r=a.orgName,n=a.code,i=a.orgCode,o=a.parentId,l=a.remark,s=a.pertainOrgName;t.orgName=s,t.addForm={name:r,code:n,roleGroupCode:i,parentId:o,remark:l}}),Object(d.h)().then(function(e){t.orgData.push(e.data)}),Object(d.e)().then(function(e){t.roleGroupData=e.data})},methods:{checkInfo:function(){this.$refs.addForm.validate(function(t){if(!t)return!1})},handlerSubmit:function(){var t=this;this.$refs.addForm.validate(function(e){if(!e)return!1;t.isEdit?(t.addForm.id=t.orgId,Object(d.g)(t.addForm).then(function(e){t.$emit("input",!1),t.$emit("update")})):Object(d.f)(t.addForm).then(function(e){t.$emit("input",!1),t.$emit("update")})})},handlerCancel:function(){this.$emit("input",!1)},handleSelectOrg:function(){this.treeShow=!0},handleNodeClick:function(t){var e=t.id,a=t.name;t.code,t.parentId;e!==this.orgId?(this.treeShow=!1,this.orgName=a,this.addForm.parentId=e):this.$toast("你所选择所属组织不能是当前组织")}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page p-t-40",on:{click:function(e){t.treeShow=!1}}},[a("el-col",{attrs:{span:10,offset:5}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.rules,"label-width":"120px",size:t.formSize}},[a("el-form-item",{attrs:{label:"组织名称：",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入组织名称"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"组织编码：",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入组织编码",disabled:t.isEdit},model:{value:t.addForm.code,callback:function(e){t.$set(t.addForm,"code",e)},expression:"addForm.code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属角色组：",prop:"roleGroupCode"}},[a("el-select",{staticClass:"w-fill",attrs:{placeholder:"请选择角色组"},model:{value:t.addForm.roleGroupCode,callback:function(e){t.$set(t.addForm,"roleGroupCode",e)},expression:"addForm.roleGroupCode"}},t._l(t.roleGroupData,function(t){return a("el-option",{key:t.id,attrs:{value:t.code,label:t.name}})}),1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.orgData.length,expression:"orgData.length"}],attrs:{label:"所属组织：",prop:"parentId"}},[a("el-input",{attrs:{placeholder:"请选择组织"},model:{value:t.orgName,callback:function(e){t.orgName=e},expression:"orgName"}}),t._v(" "),a("div",{staticClass:"orgs-tree",on:{click:function(e){return e.stopPropagation(),t.handleSelectOrg(e)}}},[t.treeShow?a("v-input-box",{staticClass:"tree box-shadow"},[a("el-tree",{attrs:{data:t.orgData,props:t.defaultProps,accordion:"","highlight-current":"","expand-on-click-node":!1},on:{"node-click":t.handleNodeClick}})],1):t._e()],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"在此添加备注",maxlength:"200"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:t.btnSize},on:{click:t.handlerCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:t.btnSize,type:"primary"},on:{click:t.handlerSubmit}},[t._v("确 定")])],1)],1)],1)],1)])},staticRenderFns:[]};var g=a("VU/8")(m,v,!1,function(t){a("vZhc")},"data-v-bfdd5588",null).exports,b={data:function(){return{span:8,bSing:!1,btnSize:i.a.baseBtn,detailData:{}}},props:{value:{type:Boolean,default:function(){return!1}},id:{type:Number,default:function(){return""}}},created:function(){var t=this;Object(d.c)({id:this.id}).then(function(e){e.data.createDate=t.dateTimeDowith(e.data.createDate)||"",t.detailData=e.data,t.bSing=!0})},methods:{handleBack:function(){this.$emit("input",!1)},formateArr:function(t){var e=[];return t.forEach(function(t){e.push(t.name)}),e.join("/")},dateTimeDowith:function(t){return t.length>19?t.substr(0,19):t}},filters:{}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page"},[t.bSing?a("el-col",{attrs:{span:12,offset:6}},[a("v-item-detail",{staticClass:"m-t-34",attrs:{tooltip:!0,label:"组织名称：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t.detailData.orgName))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.detailData.orgName))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"组织编码：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t.detailData.code))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.detailData.code))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"所属角色组：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t.detailData.pertainRoleName))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.detailData.pertainRoleName))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"所属组织：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t.detailData.pertainOrgName))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.detailData.pertainOrgName))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"创建人：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t.detailData.createUser))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.detailData.createUser))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"创建时间：",span:t.span}},[a("span",{staticClass:"block text-ellipsis"},[t._v(t._s(t.detailData.createDate))]),t._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.detailData.createDate))])]),t._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"备注：",span:t.span}},[a("span",{staticClass:"block showAllText"},[t._v(t._s(t.detailData.remark))]),t._v(" "),a("div",{staticClass:"tooltip-item showAllText",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.detailData.remark))])]),t._v(" "),a("div",{staticClass:"text-center m-t-32"},[a("el-button",{attrs:{size:t.btnSize},on:{click:t.handleBack}},[t._v("返回")])],1)],1):t._e()],1)])},staticRenderFns:[]};var w={data:function(){return{total:0,addShow:!1,isEdit:!1,isDetailShow:!1,orgId:"",detailId:"",btnSize:i.a.homeBtn,getOrgListParams:{name:"",beginDate:"",endDate:"",offset:1,limit:i.a.limit},orgList:[]}},created:function(){this._getOrgList()},methods:{_getOrgList:function(){var t=this;Object(d.d)(this.getOrgListParams).then(function(e){t.total=e.data.total,t.orgList=e.data.list})},handleAdd:function(){this.addShow=!0,this.isEdit=!1},handleEdit:function(t){this.addShow=!0,this.isEdit=!0,this.orgId=t.id},handleDetail:function(t){var e=t.id;this.isDetailShow=!0,this.detailId=e},handleSearch:function(t){this.getOrgListParams=n()({},this.getOrgListParams,t),this.getOrgListParams.offset=1,this._getOrgList(),this.$refs.Fpage._init()},handlePagingChange:function(t){this.getOrgListParams=n()({},this.getOrgListParams,t),this._getOrgList()}},components:{VSearch:s,VOrgTable:h,Add:g,Detail:a("VU/8")(b,_,!1,function(t){a("NfXX")},"data-v-48e347fc",null).exports}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.addShow||t.isDetailShow?t._e():a("v-search",{on:{search:t.handleSearch}}),t._v(" "),t.addShow||t.isDetailShow?t._e():a("div",{staticClass:"function-wrap"},[a("el-button",{attrs:{size:t.btnSize},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),t.addShow||t.isDetailShow?t._e():a("v-org-table",{staticClass:"org-table",attrs:{tableData:t.orgList},on:{update:t._getOrgList,edit:t.handleEdit,detail:t.handleDetail}}),t._v(" "),t.addShow||t.isDetailShow?t._e():a("v-paging",{ref:"Fpage",attrs:{total:t.total},on:{pagingChange:t.handlePagingChange}}),t._v(" "),t.addShow?a("add",{attrs:{isEdit:t.isEdit,orgId:t.orgId},on:{update:t._getOrgList},model:{value:t.addShow,callback:function(e){t.addShow=e},expression:"addShow"}}):t._e(),t._v(" "),t.isDetailShow?a("detail",{attrs:{id:t.detailId},model:{value:t.isDetailShow,callback:function(e){t.isDetailShow=e},expression:"isDetailShow"}}):t._e()],1)},staticRenderFns:[]};var S=a("VU/8")(w,D,!1,function(t){a("0SBb")},"data-v-122eb394",null);e.default=S.exports},INlW:function(t,e){},NfXX:function(t,e){},crwD:function(t,e){},sxCH:function(t,e,a){"use strict";e.h=function(t){var e=n.queryOrganizationTree;return Object(r.a)(e,{params:t})},e.a=function(t){var e=n.checkCode;return Object(r.a)(e,{params:t})},e.f=function(t){var e=n.insert;return Object(r.a)(e,{data:t,method:"post"})},e.g=function(t){var e=n.update;return Object(r.a)(e,{data:t,method:"post"})},e.c=function(t){var e=n.handleDetail;return Object(r.a)(e,{params:t})},e.e=function(t){var e=n.getqueryall;return Object(r.a)(e,{params:t})},e.d=function(t){var e=n.list;return Object(r.a)(e,{data:t,method:"post"})},e.b=function(t){var e=n.delete;return Object(r.a)(e,{params:t})};var r=a("68+Y"),n={queryOrganizationTree:"/organization/queryOrganizationTree",insert:"/organization/insert",update:"/organization/update",handleDetail:"/organization/queryById",checkCode:"/organization/checkCode",getqueryall:"/roleGroup/getqueryall",list:"/organization/list",delete:"/organization/delete"}},vZhc:function(t,e){}});