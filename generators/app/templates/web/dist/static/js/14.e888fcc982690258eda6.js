webpackJsonp([14],{"0Zxg":function(e,t){},"1+OV":function(e,t){},"2xnN":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("QmSG"),n=a("hDA+"),r=a("sxCH"),i={props:{tableData:{type:Array,default:function(){return[]}}},data:function(){return{tableSize:o.a.tableSize,colWidth:o.a.colWidth,options:[{value:"0",label:"禁用"},{value:"1",label:"启用"}]}},computed:{},watch:{},created:function(){this.oldStatus=""},methods:{handleEdit:function(e){this.$emit("edit",e)},handleDel:function(e){var t=this,a=e.id;this._$confirm().then(function(){Object(r.b)({id:a}).then(function(e){t._send()})}).catch(function(){return!1})},handleDetail:function(e){this.$emit("detail",e)},handleCommand:function(e,t){var a=this,o=e.status,n=(e.id,t.value);t.label;if(o===n)return!1;var r="1"===n?"是否需要对该用户账户进行启用":"是否需要对该用户账户进行禁用",i="1"===n?"启用":"禁用";this._$confirm({content:r,title:i}).then(function(){a._send()}).catch(function(){return!1})},_send:function(){this.$emit("update")}},filters:{formatStatus:function(e){return"0"===e?"禁用":"启用"},dateTimeDowith:function(e){return e.length>19?e.substr(0,19):e}},components:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{attrs:{size:e.tableSize,data:e.tableData,"highlight-current-row":"",border:!0,stripe:!0,height:"100%",width:"100%"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":e.colWidth,"show-overflow-tooltip":"",prop:"nodeName",label:"节点名称"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":e.colWidth,"show-overflow-tooltip":"",prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":e.colWidth,"show-overflow-tooltip":"",prop:"lowerNodeName",label:"下级节点"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":e.colWidth,"show-overflow-tooltip":"",prop:"rejectedName",label:"驳回节点"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":e.colWidth,"show-overflow-tooltip":"",prop:"turnToName",label:"转向节点"}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,l,!1,function(e){a("rjJQ")},"data-v-4d442a8e",null).exports,c={data:function(){return{show:!0,test:"",colWidth:o.a.colWidth,btnSize:o.a.homeBtn,formSize:o.a.homeFormSize,tempId:201819001,selectCount:0}},props:{tableData:{type:Array,default:function(){return[]}}},mounted:function(){this.rowDrop()},created:function(){this.init()},watch:{},methods:{rowDrop:function(){},init:function(){},add:function(e){var t=this.tableData.map(function(t,a){return t===e?a:null}).filter(function(e,t){return null!=e})[0];this.tempId++;var a={id:"",nodeName:"",remark:"",delete:!0,add:!0,rejectedName:"",turnToName:"",lowerNodeName:"",tempId:this.tempId};this.tableData.splice(t+1,0,a),this.$emit("changeData",this.tableData,1)},del:function(e){var t=this.tableData.map(function(t,a){return t===e?a:null}).filter(function(e,t){return null!=e})[0];this.tableData.map(function(t,a){return t.turnToCode===e.id&&(t.turnToCode="",t.turnToName=""),t.rejectedCode===e.id&&(t.rejectedCode="",t.rejectedName=""),t});var a=Object(n.b)(this.tableData[t]);this.$emit("delData",a),this.tableData.splice(t,1),this.$emit("changeData",this.tableData)},remarkSet:function(e,t){this.$emit("changeData",this.tableData)},nameSet:function(e,t){this.$emit("changeData",this.tableData)}},computed:{total:function(){return this.tableData.length}},components:{}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"first-boby h-fill"},[0===e.tableData.length?a("div",{staticClass:"add-btn"},[a("el-button",{attrs:{size:e.btnSize},on:{click:function(t){return e.add(0)}}},[e._v("新增")])],1):e._e(),e._v(" "),a("el-table",{staticClass:"list-table",class:0===e.tableData.length?"add-style":"h-fill",attrs:{data:e.tableData,border:"","row-key":"id","highlight-current-row":!0,stripe:!0}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"节点名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{padding:"0"},attrs:{size:"mini",maxlength:"30"},on:{blur:function(a){return e.nameSet(t.row,t.row.nodeName)},"on-mouseenter":function(a){return e.mouseenter(t.row,t.row.nodeName)},"on-mouseleave":function(a){return e.mouseleave(t.row,t.row.nodeName)}},model:{value:t.row.nodeName,callback:function(a){e.$set(t.row,"nodeName",a)},expression:"scope.row.nodeName"}})]}}],null,!1,2428212223)}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{padding:"0"},attrs:{size:"mini",maxlength:"100"},on:{blur:function(a){return e.remarkSet(t.row,t.row.remark)},"on-mouseenter":function(a){return e.mouseenter(t.row,t.row.remark)},"on-mouseleave":function(a){return e.mouseleave(t.row,t.row.targetValue)}},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}})]}}],null,!1,849192688)}),e._v(" "),a("el-table-column",{attrs:{"min-width":e.colWidth,fixed:"right",label:"操作","show-overflow-tooltip":!1,width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.add,expression:"scope.row.add"}],staticClass:"edit-btn-class",attrs:{type:"text",size:"small"},on:{click:function(a){return e.add(t.row)}}},[e._v("添加节点")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.delete,expression:"scope.row.delete"}],attrs:{type:"text",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}],null,!1,2998755826)})],1)],1):e._e()},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("jWAm")},"data-v-0337f7fa",null).exports,h={data:function(){return{show:!0,test:"",colWidth:o.a.colWidth,btnSize:o.a.homeBtn,formSize:o.a.homeFormSize,options2:[],options:[],selectCount:0}},props:{tableData:{type:Array,default:function(){return[]}},delData:{type:Array,default:function(){return[]}}},mounted:function(){this.rowDrop()},created:function(){this.init()},watch:{},computed:{total:function(){return this.tableData.length}},methods:{rowDrop:function(){},init:function(){for(var e=[],t=[],a=[],o=0;o<this.tableData.length;o++){var n=this.tableData[o],r=n.nodeCode,i=n.nodeName;a.push({nodeCode:r,nodeName:i})}for(var l=0;l<a.length;l++)e.push(a.slice(0,l)),t.push(a.slice(l+2,a.length));this.options=e,this.options2=t},handlerChange:function(e,t){this.tableData=this.tableData.map(function(a){return a.id===e.id&&(a.rejectedName=t.nodeName,a.rejectedCode=t.nodeCode),a}),this.$emit("changeData",this.tableData,2)},handlerChange1:function(e,t){this.tableData=this.tableData.map(function(a){return a.id===e.id&&(a.turnToName=t.nodeName,a.turnToCode=t.nodeCode),a}),this.$emit("changeData",this.tableData)}},filters:{formatIndex:function(e){return"序号:"+(e+1)},formatNodeName:function(e){return"节点名称:"+e},formatRemark:function(e){return"备注信息:"+e},formatturnToName:function(e){return e&&e.length>0?e:"无"},formatrejectedName:function(e){return e&&e.length>0?e:"无"}},components:{}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"second-boby h-fill"},[a("el-table",{staticClass:"h-fill",attrs:{data:e.tableData,"show-header":!1,"row-key":"id"}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("formatIndex")(t.row.index))+"\n            ")]}}],null,!1,3640925639)}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"节点名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("formatNodeName")(t.row.nodeName))+"\n            ")]}}],null,!1,2463588167)}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注信息","min-width":e.colWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("formatRemark")(t.row.remark))+"\n            ")]}}],null,!1,3439738919)}),e._v(" "),a("el-table-column",{attrs:{"min-width":e.colWidth,label:"驳回节点",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"h-30 w-270-block"},[a("div",{staticClass:"cell-text-w-70 pull-left"},[e._v("驳回节点:")]),e._v(" "),a("div",{staticClass:"h-30 w-190 cell-border-set pull-right",class:0===e.options[t.row.index].length?"disabled-style":""},[a("el-dropdown",{staticClass:"pointer dropdown-select-style text-right",attrs:{trigger:0===e.options[t.row.index].length?"":"click",disabled:0===e.options[t.row.index].length}},[a("span",{staticClass:"el-dropdown-link text-ellipsis el-tooltip block h-12-r-20-box w-fill",class:0===e.options[t.row.index].length?"disabled-allow-style":""},[e._v("\n                                "+e._s(e._f("formatrejectedName")(t.row.rejectedName))+"\n                                "),a("i",{staticClass:"el-icon-arrow-down pos-ab-r-5"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"drop-select",nativeOn:{click:function(a){return e.handlerChange(t.row,"")}}},[e._v("无")]),e._v(" "),e._l(e.options[t.row.index],function(o){return a("el-dropdown-item",{key:o.nodeName,staticClass:"drop-select",nativeOn:{click:function(a){return e.handlerChange(t.row,o)}}},[e._v(e._s(o.nodeName))])})],2)],1)],1)])]}}],null,!1,555592039)}),e._v(" "),a("el-table-column",{attrs:{"min-width":e.colWidth,label:"转向节点",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"h-30 w-270-block"},[a("div",{staticClass:"cell-text-w-70 pull-left"},[e._v("转向节点:")]),e._v(" "),a("div",{staticClass:"h-30 w-190 cell-border-set text-right",class:0===e.options2[t.row.index].length?"disabled-style":""},[a("el-dropdown",{staticClass:"pointer dropdown-select-style text-right",attrs:{trigger:0===e.options2[t.row.index].length?"":"click",disabled:0===e.options2[t.row.index].length}},[a("span",{staticClass:"el-dropdown-link text-ellipsis el-tooltip h-12-r-20-box  w-fill"},[e._v("\n                                "+e._s(e._f("formatturnToName")(t.row.turnToName))+"\n                                "),a("i",{staticClass:"el-icon-arrow-down pos-ab-r-5"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"drop-select",nativeOn:{click:function(a){return e.handlerChange1(t.row,"")}}},[e._v("无")]),e._v(" "),e._l(e.options2[t.row.index],function(o){return a("el-dropdown-item",{key:o.nodeName,staticClass:"drop-select",nativeOn:{click:function(a){return e.handlerChange1(t.row,o)}}},[e._v(e._s(o.nodeName))])})],2)],1)],1)])]}}],null,!1,1926913682)}),e._v(" "),a("el-table-column",{attrs:{"min-width":e.colWidth,label:"",width:"10"}})],1)],1):e._e()},staticRenderFns:[]};var m=a("VU/8")(h,p,!1,function(e){a("0Zxg")},"data-v-836326ea",null).exports,f=a("OseV"),v={props:{},data:function(){return{tableData2:[],delDataArr:[],tableData:[],createBy:"",createTime:"",total:0,activeIndex:1,setShow:!1,btnSize:o.a.homeBtn,listParams:{limit:o.a.limit,offset:1}}},computed:{},watch:{activeIndex:function(e){this.setShow=0!==e}},created:function(){this._getData()},methods:{setAudit:function(){this.activeIndex=1,this.setShow=!0},changeData:function(e,t){1===t&&(this.tableData=e),2===t&&(this.tableData2=e)},_getData:function(){var e=this;Object(f.a)().then(function(t){t.data.map(function(e,t){return e.delete=!0,e.add=!0,e.rejectedName=e.rejectedName||"无",e.turnToName=e.turnToName||"无",e.lowerNodeName=e.lowerNodeName||"无",e.turnToCode=e.turnTo||"",e.rejectedCode=e.rejected||"",e}),e.tableData=t.data,e.total=e.tableData.length})},delData:function(e){this.delDataArr.push(e)},lastStep:function(){if(this.tableData2=[],1===this.activeIndex)return this.setShow=!1,this.delDataArr=[],this.tableData=[],this._getData(),void(this.activeIndex=0);this.activeIndex>1&&this.activeIndex--},nextStep:function(){var e=this;if(this.activeIndex>=2){var t=this.tableData2.map(function(e,t){return{id:e.id,nodeCode:e.nodeCode,rejected:e.rejectedCode,turnTo:e.turnToCode}});Object(f.c)(t).then(function(t){e.setShow=!1,e.activeIndex=0,e.delDataArr=[],e.tableData=[],e.tableData2=[],e._getData()})}else if(0!==this.tableData.length){var a=this.tableData.filter(function(e,t){return 0===e.nodeName.length});if(a.length>0)this.$toast("您还有节点信息没有完善,请完善节点信息!");else{var o=this.tableData.map(function(e,t){return e.steps=t,{nodeCode:e.nodeCode,nodeName:e.nodeName,remark:e.remark,steps:e.steps}});Object(f.b)(o).then(function(t){t.data.map(function(e,t){e.delete=!0,e.add=!0,e.remark=e.remark||"",e.rejectedName=e.rejectedName||"无",e.turnToName=e.turnToName||"无",e.lowerNodeName=e.lowerNodeName||"无",e.turnToCode=e.turnTo||"",e.rejectedCode=e.rejected||""}),e.tableData=t.data,e.tableData.map(function(t,a){return 0===a&&(t.rejectedName="",t.rejectedCode=""),a===e.tableData.length-2&&(t.turnToName="",t.turnToCode=""),a===e.tableData.length-1&&(t.turnToName="",t.turnToCode=""),t.index=a,t.steps=a,t}),e.tableData2=Object(n.b)(e.tableData),e.activeIndex++})}}else this.$toast("请新增节点并完善信息!")}},components:{ListTable:s,FirstStep:u,SecondStep:m}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.setShow?e._e():a("div",{staticClass:"function-wrap"},[a("el-button",{attrs:{size:e.btnSize},on:{click:e.setAudit}},[e._v("设置")])],1),e._v(" "),e.setShow?e._e():a("list-table",{staticClass:"list-table",attrs:{tableData:e.tableData},on:{update:e._getData}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.setShow,expression:"setShow"}],staticClass:"content-page"},[a("div",{staticClass:"center-style pull-left"},[a("v-steps",{staticClass:"step-wrap p-l-r-40",attrs:{active:e.activeIndex}},[a("v-step",{attrs:{title:"流程节点数量设置"}}),e._v(" "),a("v-step",{attrs:{title:"流程节点配置设置"}})],1)],1),e._v(" "),a("div",{staticClass:"button--right--group block pull-right pos-r"},[a("el-button",{attrs:{size:"small",type:""},on:{click:e.lastStep}},[e._v(e._s(1==e.activeIndex?"取消":"上一步"))]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.nextStep}},[e._v(e._s(1==e.activeIndex?"下一步":"执行"))])],1),e._v(" "),1===e.activeIndex?a("section",{staticClass:"first m-t-45 core-body"},[a("first-step",{attrs:{tableData:e.tableData},on:{delData:e.delData,changeData:e.changeData}})],1):e._e(),e._v(" "),2===e.activeIndex?a("section",{staticClass:"second m-t-45 core-body"},[a("second-step",{attrs:{delData:e.delDataArr,tableData:e.tableData2},on:{changeData:e.changeData}})],1):e._e()])],1)},staticRenderFns:[]};var w=a("VU/8")(v,b,!1,function(e){a("eccT")},"data-v-7c09c13b",null);t.default=w.exports},"4AZ7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("QmSG"),n=a("wrBq"),r={props:{tableData:{type:Array,default:function(){return[]}}},data:function(){return{test:"",hiddenTreeShow:!1,currentRoleData:"",currentRoleGroupData:"",selectedRoleGroup:-1,showTreeRoleGourp:!1,selectedRole:-1,roleGroupId:"",roleId:"",tableSize:o.a.tableSize,colWidth:o.a.colWidth}},computed:{},watch:{tableData:function(e){}},created:function(){},methods:{updateSelect:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=0;this.tableData.forEach(function(t,a){t.id===e&&(o=a)}),this.currentSelectGroupIndex=o,null!==t&&void 0!==t?(this.selectedRole=t,this.selectedRoleGroup=-1):this.selectedRoleGroup=e,a||(this.showTreeRoleGourp=!0),this.requestRoleList(e)},_reset:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];-1!==e.id&&(this.hiddenTreeShow=!0,this.currentSelectGroupIndex=0,this.showTreeRoleGourp=!0,Object(n.i)({id:e.id}).then(function(o){t.roleGroupId=e.id,t.roleGroupName=e.name;var n=o.data;if(n.length>0){var r={roleGroupId:e.id,id:n[0].id};t.$emit("authSelect",r)}a||(t.tableData.forEach(function(a,o){t.tableData[o].children=[],a.id===e.id&&n.forEach(function(a){a.groupIndex_=e.groupIndex_,a.roleGroupId=e.id,a.roleGroupName=e.name,t.tableData[o].children.push(a)})}),t.tableData=t.tableData.concat([]))}).catch(function(e){}))},editInfo:function(){-1!==this.selectedRole?-1!==this.selectedRole?this.$emit("editRoleAuth",this.currentRoleData):this.$emit("editRoleGroupAuth",this.currentRoleGroupData):this.$toast("请选择角色后在编辑")},refreshTableView:function(){this.selectedRoleGroup=-1,this.showTreeRoleGourp=!1,this.selectedRole=-1,this.currentSelectGroupIndex=-1,this.hiddenTreeShow=!1},selectRoleGroupItem:function(e){var t=this;try{if(this.currentRoleGroupData=e,this.currentRoleData="",e.isRoleGroup)try{if(this.currentSelectGroupIndex===e.groupIndex_&&this.showTreeRoleGourp)return this.showTreeRoleGourp=!1,this.hiddenTreeShow=!1,this.selectedRoleGroup=e.id,this.selectedRole=-1,this.roleGroupName=e.name,this.roleGroupId=e.isRoleGroup?e.id:"",this.roleId="",void this.$emit("detailRoleGroup",e);this.currentSelectGroupIndex=e.groupIndex_,this.hiddenTreeShow=!0,this.showTreeRoleGourp=!0;var a=e.name;this.addRoleForm={name_:a,name:"",menus:[],remark:""},this.roleGroupId=e.isRoleGroup?e.id:"",this.$emit("detailRoleGroup",e),this.roleGroupName=e.name,this.selectedRoleGroup=e.id,this.selectedRole=-1,Object(n.i)({id:e.id}).then(function(a){t.roleGroupId=e.id,t.roleGroupName=e.name;var o=a.data;t.tableData.forEach(function(a,n){t.tableData[n].children=[],a.id===e.id&&o.forEach(function(a){a.groupIndex_=e.groupIndex_,a.roleGroupId=e.id,a.roleGroupName=e.name,t.tableData[n].children.push(a)})}),t.tableData=t.tableData.concat([])}).catch(function(e){})}catch(e){}}catch(e){}},selectRole:function(e,t){this.selectedRole=e.id,this.selectedRoleGroup=-1,this.showTreeRoleGourp=!0,this.currentRoleData=e,this.currentSelectGroupIndex=e.groupIndex_,this.hiddenTreeShow=!0,this.currentRoleGroupData="",this.$emit("authSelect",e)}},filters:{},components:{}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"btn-wrap"},[a("el-button",{attrs:{size:"small",plain:"",icon:"iconfont icon-xiugai-weidianji"},on:{click:e.editInfo}},[a("span",{staticClass:"text"},[e._v("编辑")])])],1),e._v(" "),a("div",{staticClass:"role-wrap"},[e.tableData.length>0?a("ul",{staticClass:"tree"},e._l(e.tableData,function(t,o){return a("li",{key:o,staticClass:"item"},[a("div",{class:["text text-ellipsis",{active:e.selectedRoleGroup==t.id}]},[e.currentSelectGroupIndex==o&&e.hiddenTreeShow?a("i",{staticClass:"el-icon-caret-bottom",class:["icontext",{active:e.selectedRoleGroup==t.id}],on:{click:function(a){return e.selectRoleGroupItem(t)}}}):a("i",{staticClass:"el-icon-caret-right",class:["icontext",{active:e.selectedRoleGroup==t.id}],on:{click:function(a){return e.selectRoleGroupItem(t)}}}),e._v(" "),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.name.length>10,expression:"item.name.length>10"}],attrs:{content:t.name,placement:"bottom"}},[a("span",{staticClass:"name",class:["roleGroupName",{active:e.selectedRoleGroup==t.id}],on:{click:function(a){return e.selectRoleGroupItem(t)}}},[e._v(e._s(t.name))])]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.name.length<11,expression:"item.name.length<11"}],staticClass:"name",class:["roleGroupName",{active:e.selectedRoleGroup==t.id}],on:{click:function(a){return e.selectRoleGroupItem(t)}}},[e._v(e._s(t.name))])],1),e._v(" "),t.hasOwnProperty("children")&&Array.isArray(t.children)?a("ul",{directives:[{name:"show",rawName:"v-show",value:e.hiddenTreeShow,expression:"hiddenTreeShow"}],key:"child_"+o,staticClass:"tree-text"},e._l(t.children,function(o,n){return a("li",{key:"child_list"+n,staticClass:"item"},[a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:o.name.length>10,expression:"childrenitem.name.length>10"}],attrs:{content:o.name,placement:"bottom"}},[a("div",{staticClass:"text text-ellipsis",class:["roleName",{active:e.selectedRole==o.id}],on:{click:function(a){return e.selectRole(o,t)}}},[e._v("\n                                "+e._s(o.name)+"\n                            ")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:o.name.length<11,expression:"childrenitem.name.length<11"}],staticClass:"text text-ellipsis",class:["roleName",{active:e.selectedRole==o.id}],on:{click:function(a){return e.selectRole(o,t)}}},[e._v("\n                            "+e._s(o.name)+"\n                        ")])],1)}),0):e._e()])}),0):e._e()])])},staticRenderFns:[]};var l=a("VU/8")(r,i,!1,function(e){a("1+OV")},"data-v-c732f544",null).exports,s=a("woOf"),c=a.n(s),d=a("68+Y"),u={getProces:"/process/roles/getProces",proceSet:"/process/roles/insert"};function h(e){var t=u.getProces;return Object(d.a)(t,{params:e,method:"post"})}var p={data:function(){return{span:8,bSing:!1,btnSize:o.a.baseBtn,detailRoleForm:{id:"",name:"",menus:[],code:"",remark:"",enable:"",name_:"",roleGroupId:"",nodeInfo:"",parentId:""},roleGroupTree:[],defaultProps:{children:"children",label:"name"}}},props:{roleId:{type:Number,default:function(){return-1}}},watch:{roleId:function(e,t){e&&this._getData()}},created:function(){this.bSing=!0,this._getData()},mounted:function(){},methods:{_getData:function(){var e=this;this.detailRoleForm={},Object(n.j)({id:this.roleId}).then(function(t){t.data.createTime=e.formatDateTime(t.data.createTime),e.detailRoleForm=c()({},e.detailRoleForm,t.data)}).catch(function(e){}),h({roleId:this.roleId}).then(function(t){var a=t.data.map(function(e){return e.nodeName}).join("/");e.detailRoleForm=c()({},e.detailRoleForm,{nodeInfo:a})}).catch(function(e){})},formatDateTime:function(e){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1;o=o<10?"0"+o:o;var n=t.getDate();n=n<10?"0"+n:n;var r=t.getHours();r=r<10?"0"+r:r;var i=t.getMinutes(),l=t.getSeconds();return a+"-"+o+"-"+n+" "+r+":"+(i=i<10?"0"+i:i)+":"+(l=l<10?"0"+l:l)},handleBack:function(){this.$emit("input",!1)}},filters:{},components:{}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-wrap-auth pull-right"},[a("div",{staticClass:"role-height h-fill"},[e.bSing?a("el-col",[a("v-item-detail",{staticClass:"m-t-34",attrs:{tooltip:!0,label:"角色名称：",span:e.span}},[a("span",{staticClass:"block text-ellipsis"},[e._v(e._s(e.detailRoleForm.name))]),e._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.detailRoleForm.name))])]),e._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"所属角色组：",span:e.span}},[a("span",{staticClass:"block text-ellipsis"},[e._v(e._s(e.detailRoleForm.roleGroupName))]),e._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.detailRoleForm.roleGroupName))])]),e._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"创建人：",span:e.span}},[a("span",{staticClass:"block text-ellipsis"},[e._v(e._s(e.detailRoleForm.createUser))]),e._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.detailRoleForm.createUser))])]),e._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"创建时间：",span:e.span}},[a("span",{staticClass:"block text-ellipsis"},[e._v(e._s(e.detailRoleForm.createTime))]),e._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.detailRoleForm.createTime))])]),e._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"流程授权：",span:e.span}},[a("span",{staticClass:"block text-ellipsis"},[e._v(e._s(e.detailRoleForm.nodeInfo))]),e._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.detailRoleForm.nodeInfo))])])],1):e._e()],1)])},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("ihT+")},"data-v-4ff65fa2",null).exports,v=a("//Fk"),b=a.n(v),w=a("OseV"),g={data:function(){return{showTree:!0,settingForm:{name:"",roleGroupName:"",createBy:"",createTime:"",dataList:[],menusList:[]},roleTree:[],defaultProps:{children:"children",label:"name"},menusList:[],menus:[]}},computed:{},props:{roleId:{type:String,default:function(){return""}}},mounted:function(){},created:function(){this._getData()},watch:{},methods:{clear:function(){this.showTree=!1,this.settingForm.dataList=[],this.settingForm.menusList=[],this.menusList=[],this.showTree=!0},_getData:function(){var e=this;this.settingForm={},Object(n.j)({id:this.roleId}).then(function(t){t.data.createTime=e.formatDateTime(t.data.createTime),e.settingForm=t.data,b.a.all([h({roleId:e.roleId}),Object(w.a)()]).then(function(t){var a=t[0].data;e.settingForm.dataList=a,e.settingForm.menusList=a.map(function(e){return e.nodeCode}),e.menusList=e.settingForm.menusList;var o=t[1].data;e.roleTree=o})})},formatDateTime:function(e){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1;o=o<10?"0"+o:o;var n=t.getDate();n=n<10?"0"+n:n;var r=t.getHours();r=r<10?"0"+r:r;var i=t.getMinutes(),l=t.getSeconds();return a+"-"+o+"-"+n+" "+r+":"+(i=i<10?"0"+i:i)+":"+(l=l<10?"0"+l:l)},cancelBtn:function(e){this.$emit("input",!1),this.$emit("cancel",this.roleId)},submitBtn:function(){var e=this;this.selectRole=!0;var t=this.roleTree.filter(function(t){var a=e.menusList.filter(function(e){return t.nodeCode===e});if(a&&a.length>0)return t});this.$refs.settingForm.validate(function(a){var o,n;(o={roleId:e.roleId,nodes:t},n=u.proceSet,Object(d.a)(n,{data:o,method:"post"})).then(function(t){e.$emit("cancel",e.roleId)})})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-wrap-auth pull-right"},[a("el-col",{staticClass:"form"},[a("el-form",{ref:"settingForm",attrs:{model:e.settingForm,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"角色名称：",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入角色名称",disabled:"false"},model:{value:e.settingForm.name,callback:function(t){e.$set(e.settingForm,"name",t)},expression:"settingForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属角色组：",prop:"roleGroupName"}},[a("el-input",{attrs:{placeholder:"请输入角色名称",disabled:"false"},model:{value:e.settingForm.roleGroupName,callback:function(t){e.$set(e.settingForm,"roleGroupName",t)},expression:"settingForm.roleGroupName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建人：",prop:"createUser"}},[a("el-input",{attrs:{placeholder:"请输入角色名称",disabled:"false"},model:{value:e.settingForm.createUser,callback:function(t){e.$set(e.settingForm,"createUser",t)},expression:"settingForm.createUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间：",prop:"createTime"}},[a("el-input",{attrs:{placeholder:"请输入角色名称",disabled:"false"},model:{value:e.settingForm.createTime,callback:function(t){e.$set(e.settingForm,"createTime",t)},expression:"settingForm.createTime"}})],1),e._v(" "),a("el-form-item",{staticClass:"menu-style",staticStyle:{position:"relative"},attrs:{label:"流程授权：",prop:"dataList"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.roleTree.length,expression:"!roleTree.length"}],attrs:{disabled:"",placeholder:"暂无相关数据"}}),e._v(" "),a("v-input-box",{directives:[{name:"show",rawName:"v-show",value:e.roleTree.length>0&&e.showTree,expression:"roleTree.length>0&&showTree"}]},[a("el-checkbox-group",{model:{value:e.menusList,callback:function(t){e.menusList=t},expression:"menusList"}},e._l(e.roleTree,function(t){return a("el-checkbox",{key:t.id,staticClass:"checkbox text-ellipsis",attrs:{label:t.nodeCode}},[a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.nodeName.length>25,expression:"item.nodeName.length>25"}],staticClass:"item",attrs:{effect:"dark",content:t.nodeName,placement:"top-start"}},[a("span",[e._v(e._s(t.nodeName))])]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.nodeName.length<=25,expression:"item.nodeName.length<=25"}]},[e._v("\n                                "+e._s(t.nodeName)+"\n                            ")])],1)}),1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"btn"},[a("el-button",{on:{click:function(t){return e.cancelBtn(e.settingForm)}}},[e._v("取消")]),e._v(" "),a("el-button",{on:{click:e.submitBtn}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.clear()}}},[e._v("清除所有勾选节点")])],1)],1)],1)],1)},staticRenderFns:[]};var R=a("VU/8")(g,_,!1,function(e){a("YBcY")},"data-v-4703309f",null).exports,D={data:function(){return{span:8,bSing:!1,btnSize:o.a.baseBtn,detailRoleGroupForm:{id:"",name:"",menus:[],code:"",remark:"",enable:"",name_:"",roleGroupId:"",parentId:""},roleGroupTree:[],defaultProps:{children:"children",label:"name"}}},props:{id:{type:Number,default:function(){return-1}}},watch:{id:function(e,t){var a=this;Object(n.l)({id:this.id}).then(function(e){a.detailRoleGroupForm={},e.data.createTime=a.formatDateTime(e.data.createTime),a.detailRoleGroupForm=e.data}).catch(function(e){})}},created:function(){this.bSing=!0,this._getData()},mounted:function(){},methods:{_getData:function(){var e=this;Object(n.l)({id:this.id}).then(function(t){t.data.createTime=e.formatDateTime(t.data.createTime),e.detailRoleGroupForm=t.data}).catch(function(e){})},formatDateTime:function(e){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1;o=o<10?"0"+o:o;var n=t.getDate();n=n<10?"0"+n:n;var r=t.getHours();r=r<10?"0"+r:r;var i=t.getMinutes(),l=t.getSeconds();return a+"-"+o+"-"+n+" "+r+":"+(i=i<10?"0"+i:i)+":"+(l=l<10?"0"+l:l)},handleBack:function(){this.$emit("input",!1)}},filters:{},components:{}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-wrap-auth pull-right"},[a("div",{staticClass:"role-height h-fill"},[a("el-col",{ref:"detailForm",staticClass:"form",attrs:{model:e.detailRoleGroupForm,"label-width":"110px"}},[a("v-item-detail",{staticClass:"m-t-5",attrs:{tooltip:!0,label:"角色组名称：",span:e.span}},[a("span",{staticClass:"block text-ellipsis"},[e._v(e._s(e.detailRoleGroupForm.name))]),e._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.detailRoleGroupForm.name))])]),e._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"创建人：",span:e.span}},[a("span",{staticClass:"block text-ellipsis"},[e._v(e._s(e.detailRoleGroupForm.createBy))]),e._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.detailRoleGroupForm.createBy))])]),e._v(" "),a("v-item-detail",{attrs:{tooltip:!0,label:"创建时间：",span:e.span}},[a("span",{staticClass:"block text-ellipsis"},[e._v(e._s(e.detailRoleGroupForm.createTime))]),e._v(" "),a("div",{staticClass:"tooltip-item",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.detailRoleGroupForm.createTime))])])],1)],1)])},staticRenderFns:[]};var x={props:{},data:function(){return{isEdit:!1,isDetail:!1,btnSize:o.a.homeBtn,isRoleGroup:!0,currentRoleId:-1,currentRoleGroupId:-1,tableData:[],roleGroupId:"",initId:"",roleGroupData:[],roleGroupDetail:{},addNewRoleWithGroupData:"",roleData:[]}},computed:{},watch:{},created:function(){},mounted:function(){this.initRoleGroupData({isRoleGroup:!0})},methods:{cancel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isEdit=!1,this.isDetail=!0,this.currentRoleId=e,this.currentRoleGroupId=t},authSelect:function(e){this.isEdit=!1,this.isDetail=!0,this.isRoleGroup=!1,this.currentRoleId=e.id,this.currentRoleGroupId=e.roleGroupId},editRoleAuth:function(e){this.isDetail=!1,this.isEdit=!0,this.currentRoleId=e.id,this.currentRoleGroupId=e.roleGroupId},initRoleGroupData:function(e){var t=this;if(this.isEdit)return e.isRoleGroup?this.currentRoleGroupId=e.id:this.currentRoleId=e.id,this.isDetail=!0,this.isAdd=!1,this.isEdit=!1,void(this.isRoleGroup=e.isRoleGroup);this.$refs.tableView.refreshTableView(),Object(n.m)().then(function(a){e.isRoleGroup?t.currentRoleGroupId=e.id:t.currentRoleId=e.id;try{t.roleGroupData=[],t.tableData=[],e.id||(t.currentRoleGroupId=a.data[0].id),a.data.forEach(function(e,a){e.groupIndex_=a,e.isRoleGroup=!0,t.roleGroupData.children=[],t.roleGroupData.push(e)}),t.tableData=t.roleGroupData,a.data.length>0&&(e.isRoleGroup?(t._roleGroupDetail(t.currentRoleGroupId),t.$refs.tableView.updateSelect(t.currentRoleGroupId,null,!0)):(t.isDetail=!0,t.isAdd=!1,t.isEdit=!1,t.isRoleGroup=!1))}catch(e){}}).catch(function(e){})},_roleGroupDetail:function(e){var t=this;try{Object(n.l)({id:e}).then(function(e){t.currentRoleGroupId=e.data.id,t.isDetail=!0,t.isAdd=!1,t.isEdit=!1,t.isRoleGroup=!0,t.roleGroupId=e.data.id,t.roleGroupDetail=e.data}).catch(function(e){})}catch(e){}},detailRoleGroup:function(e){this.isDetail=!1,this.isAdd=!1,this.isEdit=!1,this.isDetail=!0,this.isRoleGroup=!0,this.currentRoleGroupId=e.id,this.currentRoleId=-1}},components:{DetailSetting:f,RoleTable:l,DetailRoleGroup:a("VU/8")(D,G,!1,function(e){a("ejpb")},"data-v-7039735a",null).exports,SettingAuthorize:R}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("role-table",{ref:"tableView",staticClass:"role-table pull-left h-fill",attrs:{tableData:e.tableData},on:{authSelect:e.authSelect,editRoleAuth:e.editRoleAuth,detailRoleGroup:e.detailRoleGroup}}),e._v(" "),e.isEdit?a("setting-authorize",{attrs:{roleId:e.currentRoleId},on:{cancel:e.cancel}}):e._e(),e._v(" "),e.isDetail&&!e.isRoleGroup?a("detail-setting",{ref:"detail",attrs:{roleId:e.currentRoleId}}):e._e(),e._v(" "),e.isRoleGroup&&e.isDetail?a("detail-role-group",{staticClass:"detail-role-group",attrs:{id:e.currentRoleGroupId}}):e._e()],1)},staticRenderFns:[]};var N=a("VU/8")(x,C,!1,function(e){a("Io7Z")},"data-v-1289bf2c",null);t.default=N.exports},Io7Z:function(e,t){},OseV:function(e,t,a){"use strict";t.a=function(){var e=n.stepsList;return Object(o.a)(e,{method:"get"})},t.c=function(e){var t=n.stepsList;return Object(o.a)(t,{data:e,method:"put"})},t.b=function(e){var t=n.update;return Object(o.a)(t,{data:e,method:"post"})};var o=a("68+Y"),n={stepsList:"/process/stepss",update:"/process/stepss/changeNode"}},YBcY:function(e,t){},eccT:function(e,t){},ejpb:function(e,t){},"ihT+":function(e,t){},jWAm:function(e,t){},rjJQ:function(e,t){},sxCH:function(e,t,a){"use strict";t.h=function(e){var t=n.queryOrganizationTree;return Object(o.a)(t,{params:e})},t.a=function(e){var t=n.checkCode;return Object(o.a)(t,{params:e})},t.f=function(e){var t=n.insert;return Object(o.a)(t,{data:e,method:"post"})},t.g=function(e){var t=n.update;return Object(o.a)(t,{data:e,method:"post"})},t.c=function(e){var t=n.handleDetail;return Object(o.a)(t,{params:e})},t.e=function(e){var t=n.getqueryall;return Object(o.a)(t,{params:e})},t.d=function(e){var t=n.list;return Object(o.a)(t,{data:e,method:"post"})},t.b=function(e){var t=n.delete;return Object(o.a)(t,{params:e})};var o=a("68+Y"),n={queryOrganizationTree:"/organization/queryOrganizationTree",insert:"/organization/insert",update:"/organization/update",handleDetail:"/organization/queryById",checkCode:"/organization/checkCode",getqueryall:"/roleGroup/getqueryall",list:"/organization/list",delete:"/organization/delete"}},wrBq:function(e,t,a){"use strict";t.c=function(e){var t=n.checkRoleOnly;return Object(o.a)(t,{params:e})},t.b=function(e){var t=n.checkRoleGroupOnly;return Object(o.a)(t,{params:e})},t.k=function(e){var t=n.getRoleGropMenus;return Object(o.a)(t,{params:e})},t.m=function(e){var t=n.getRoleGroupList;return Object(o.a)(t,{params:e})},t.i=function(e){var t=n.getRole;return Object(o.a)(t,{params:e})},t.l=function(e){var t=n.getRoleGroupDetail;return Object(o.a)(t,{params:e})},t.n=function(e){var t=n.getRoleMenuAll;return Object(o.a)(t,{params:e})},t.a=function(e){var t=n.addRoleGroup;return Object(o.a)(t,{data:e,method:"post"})},t.h=function(e){var t=n.getEditRoleGroup;return Object(o.a)(t,{data:e,method:"put"})},t.f=function(e){var t=n.getDeleteRoleGroup;return Object(o.a)(t,{params:e,method:"delete"})},t.j=function(e){var t=n.getRoleDetail;return Object(o.a)(t,{params:e})},t.d=function(e){var t=n.getAddRole;return Object(o.a)(t,{data:e,method:"post"})},t.g=function(e){var t=n.getEditRole;return Object(o.a)(t,{data:e,method:"put"})},t.e=function(e){var t=n.getDeleteRole;return Object(o.a)(t,{params:e,method:"delete"})},t.o=function(e){var t=n.getRoleMenus;return Object(o.a)(t,{params:e})};var o=a("68+Y"),n={getRoleGropMenus:"/roleGroup/getRoleGropMenus",getRoleGroupList:"/roleGroup",getRole:"/roleGroup/getRoleGropLowerRoles",getRoleGroupDetail:"/roleGroup/getRoleGroups",getRoleMenuAll:"/menu/getMenuAll",addRoleGroup:"/roleGroup",getEditRoleGroup:"/roleGroup",getDeleteRoleGroup:"/roleGroup",getRoleMenus:"/role/getRoleMenus",getRoleList:"/role",getRoleDetail:"/role/getrole",getAddRole:"/role",getEditRole:"/role",getDeleteRole:"/role",checkRoleGroupOnly:"/roleGroup/checkRoleName",checkRoleOnly:"/role/checkRoleName"}}});